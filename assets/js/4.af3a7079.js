(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{322:function(s,t,a){s.exports=a.p+"assets/img/开窗函数1.f7683a1b.jpg"},323:function(s,t,a){s.exports=a.p+"assets/img/开窗函数2.be827f01.png"},324:function(s,t,a){s.exports=a.p+"assets/img/rank函数1.5e186e99.png"},372:function(s,t,a){"use strict";a.r(t);var n=a(3),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"row-number-over"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#row-number-over"}},[s._v("#")]),s._v(" ROW_NUMBER() OVER()")]),s._v(" "),t("blockquote",[t("p",[s._v("用于给数据库表中的记录进行标号，在使用的时候，其后还跟着一个函数 over()，而函数 over() 的作用是将表中的记录进行分组和排序。两者使用的语法为:\n"),t("strong",[s._v("ROW_NUMBER() OVER(PARTITION BY COLUMN1 ORDER BY COLUMN2)")])])]),s._v(" "),t("ul",[t("li",[s._v("PARTITION BY: 表示分组")]),s._v(" "),t("li",[s._v("ORDER BY: 表示排序")])]),s._v(" "),t("h3",{attrs:{id:"例子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[s._v("#")]),s._v(" 例子")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("order by")])])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("SELECT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("row_number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("over")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ORDER "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BY")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as num FROM `test_row_number_over`\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("img",{attrs:{src:a(322)}}),s._v(" "),t("p",[s._v("由上图看到，我们根据id进行排序 生成了 num 的排序序号。")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("partition by")])])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("SELECT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("row_number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("over")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PARTITION by id  ORDER "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BY")]),s._v(" age"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as num FROM `test_row_number_over`\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("img",{attrs:{src:a(323)}}),s._v(" "),t("p",[s._v("当我们给id 加了 partition by分组后，num值变化如上图。相同的id 会按照顺序排列。不同的id会重新排列序号。")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("row_number() over() 执行要晚于 where、group by等。")])]),s._v(" "),t("h2",{attrs:{id:"rank-over"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rank-over"}},[s._v("#")]),s._v(" RANK() OVER()")]),s._v(" "),t("blockquote",[t("p",[s._v("用于给数据库表中的记录进行标号，在使用的时候，其后还跟着一个函数 over()，而函数 over() 的作用是将表中的记录进行分组和排序。两者使用的语法为:\n"),t("strong",[s._v("RANK() OVER(PARTITION BY COLUMN1 ORDER BY COLUMN2)")])])]),s._v(" "),t("ul",[t("li",[s._v("PARTITION BY: 表示分组")]),s._v(" "),t("li",[s._v("ORDER BY: 表示排序")])]),s._v(" "),t("h3",{attrs:{id:"例子-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#例子-2"}},[s._v("#")]),s._v(" 例子")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("SELECT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("RANK")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("over")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ORDER BY age desc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as num FROM `test_row_number_over`\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("img",{attrs:{src:a(324)}}),s._v(" "),t("p",[s._v("由上图看到，我们根据age进行排序 生成了 num 序号。但是age中有两个18岁的那生成的num序号就是并列的。然而到下一条数据的时候\n会跳过并列值的下一个值。也就是图中前两条是1第三条就是三。跳过了2这个序号。")])])}),[],!1,null,null,null);t.default=r.exports}}]);